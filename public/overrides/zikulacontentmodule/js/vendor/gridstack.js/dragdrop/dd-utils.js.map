{"version":3,"file":"dd-utils.js","sourceRoot":"","sources":["../../src/dragdrop/dd-utils.ts"],"names":[],"mappings":";AAAA,8BAA8B;;AAE9B;;;;EAIE;AACF,MAAa,OAAO;IAClB,MAAM,CAAC,KAAK,CAAC,EAAe;QAC1B,MAAM,IAAI,GAAG,EAAE,CAAC,SAAS,CAAC,IAAI,CAAgB,CAAC;QAC/C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAC3B,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,EAAe,EAAE,MAAmC;QAClE,IAAI,UAAuB,CAAC;QAC5B,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;YAC9B,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAgB,CAAC,CAAC;SACvD;aAAM;YACL,UAAU,GAAG,MAAqB,CAAC;SACpC;QACD,IAAI,UAAU,EAAE;YACd,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;SACvB;IACH,CAAC;IACD,MAAM,CAAC,mBAAmB,CAAC,EAAE;QAC3B,IAAI,CAAC,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE;YAC9D,EAAE,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;SAChC;IACH,CAAC;IAED,MAAM,CAAC,QAAQ,CAAC,QAA2B,EAAE,KAAa;QACxD,IAAI,SAAS,GAAG,KAAK,CAAC;QAEtB,OAAO,CAAC,GAAG,IAAI,EAAE,EAAE;YACjB,IAAI,CAAC,SAAS,EAAE;gBACd,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC;gBAClB,SAAS,GAAG,IAAI,CAAC;gBACjB,UAAU,CAAC,GAAG,EAAE,CAAC,SAAS,GAAG,KAAK,EAAE,KAAK,CAAC,CAAC;aAC5C;QACH,CAAC,CAAA;IACH,CAAC;IACD,MAAM,CAAC,WAAW,CAAC,EAAe,EAAE,MAA6C;QAC/E,IAAI,MAAM,YAAY,MAAM,EAAE;YAC5B,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE;gBACtB,IAAI,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;oBAC5B,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;wBAC5B,yBAAyB;wBACxB,MAAM,CAAC,CAAC,CAAc,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;4BACpC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;wBACpB,CAAC,CAAC,CAAC;qBACJ;yBAAM;wBACL,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;qBACzB;iBACF;aACF;SACF;IACH,CAAC;IACD,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK;QAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,MAAM,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACnB,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;SACjB;IACH,CAAC;IAED,MAAM,CAAC,SAAS,CAAI,CAAuB,EAAE,IAA0C;QACrF,MAAM,QAAQ,GAAG,iCAAiC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC9D,MAAM,OAAO,GAAG,6CAA6C,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACzE,MAAM,GAAG,GAAG,EAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAC,CAAC;QAC9B,MAAM,GAAG,GAAG;YACV,MAAM,EAAE,CAAC;YACT,KAAK,EAAE,CAAC;YACR,OAAO,EAAE,CAAC;YACV,OAAO,EAAE,IAAI;YACb,UAAU,EAAE,IAAI;YAChB,WAAW,EAAE,CAAC;YACd,MAAM,EAAE,IAAI,CAAC,MAAM,CAAA,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM;SAC5C,CAAA;QACD,IAAI,CAAC,YAAY,SAAS,EAAE;YAC1B,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAC,YAAY,EAAE,CAAC,CAAC,YAAY,EAAC,CAAC,CAAC;SACpD;QACD,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;QACpC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;QACnC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAC9C,OAAO,GAAmB,CAAC;IAC7B,CAAC;CACF;AA/ED,0BA+EC","sourcesContent":["// dd-utils.ts 2.0.2 @preserve\n\n/**\n * https://gridstackjs.com/\n * (c) 2020 Alain Dumesny, rhlin\n * gridstack.js may be freely distributed under the MIT license.\n*/\nexport class DDUtils {\n  static clone(el: HTMLElement): HTMLElement {\n    const node = el.cloneNode(true) as HTMLElement;\n    node.removeAttribute('id');\n    return node;\n  }\n\n  static appendTo(el: HTMLElement, parent: string | HTMLElement | Node) {\n    let parentNode: HTMLElement;\n    if (typeof parent === 'string') {\n      parentNode = document.querySelector(parent as string);\n    } else {\n      parentNode = parent as HTMLElement;\n    }\n    if (parentNode) {\n      parentNode.append(el);\n    }\n  }\n  static setPositionRelative(el) {\n    if (!(/^(?:r|a|f)/).test(window.getComputedStyle(el).position)) {\n      el.style.position = \"relative\";\n    }\n  }\n\n  static throttle(callback: (...args) => void, delay: number) {\n    let isWaiting = false;\n\n    return (...args) => {\n      if (!isWaiting) {\n        callback(...args);\n        isWaiting = true;\n        setTimeout(() => isWaiting = false, delay);\n      }\n    }\n  }\n  static addElStyles(el: HTMLElement, styles: { [prop: string]: string | string[] }) {\n    if (styles instanceof Object) {\n      for (const s in styles) {\n        if (styles.hasOwnProperty(s)) {\n          if (Array.isArray(styles[s])) {\n            // support fallback value\n            (styles[s] as string[]).forEach(val => {\n              el.style[s] = val;\n            });\n          } else {\n            el.style[s] = styles[s];\n          }\n        }\n      }\n    }\n  }\n  static copyProps(dst, src, props) {\n    for (let i = 0; i < props.length; i++) {\n      const p = props[i];\n      dst[p] = src[p];\n    }\n  }\n\n  static initEvent<T>(e: DragEvent|MouseEvent, info: {type: string; target?: EventTarget}) {\n    const kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\n    const ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY'.split(',');\n    const evt = {type: info.type};\n    const obj = {\n      button: 0,\n      which: 0,\n      buttons: 1,\n      bubbles: true,\n      cancelable: true,\n      originEvent: e,\n      target: info.target? info.target : e.target\n    }\n    if (e instanceof DragEvent) {\n      Object.assign(obj, {dataTransfer: e.dataTransfer});\n    }\n    DDUtils.copyProps(evt, e, kbdProps);\n    DDUtils.copyProps(evt, e, ptProps);\n    DDUtils.copyProps(evt, obj, Object.keys(obj));\n    return evt as unknown as T;\n  }\n}\n"]}